
<!DOCTYPE html>
<!-- Architecte : Nap√© Kona -->
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Catalogue de Services</title>
    <style>
        :root {
            --accent-500: #f5a623;
            --accent-400: #ffd27a;
            --accent-200: #fff3cf;
            --gray-050: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-600: #6b7280;
            --gray-900: #111827;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: "Inter", "Segoe UI", Arial, sans-serif;
            color: var(--gray-900);
            background: #fff;
            line-height: 1.55;
        }

        .page {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px 20px 56px;
        }

        header {
            background: radial-gradient(circle at top left, #fff6dd, #ffe5b0 45%, #ffd27a 75%);
            color: var(--gray-900);
            padding: 36px 32px;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            margin-bottom: 32px;
            text-align: center;
        }

        header::after {
            content: "";
            position: absolute;
            inset: 18px;
            border: 1px solid rgba(255, 255, 255, 0.35);
            border-radius: 16px;
            pointer-events: none;
        }

        header h1 {
            margin: 0;
            font-size: 2.4rem;
            color: var(--gray-900);
        }

        header p {
            margin: 16px auto 0;
            max-width: 560px;
            font-size: 1rem;
            color: rgba(47, 50, 58, 0.8);
        }

        .hero-cta {
            margin: 24px auto 0;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: var(--gray-900);
            color: #fff;
            padding: 14px 26px;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            box-shadow: 0 12px 30px rgba(47, 50, 58, 0.3);
        }

        section {
            background: #fff;
            padding: 24px;
            border-radius: 18px;
            margin-bottom: 20px;
            box-shadow: 0 12px 38px rgba(47, 50, 58, 0.08);
        }

        section h2 {
            margin-top: 0;
            font-size: 1.6rem;
        }

        .subtitle {
            color: var(--gray-600);
            margin-bottom: 24px;
        }

        .pill {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--gray-100);
            color: var(--accent-500);
            padding: 6px 14px;
            border-radius: 999px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 18px;
        }

        .card {
            border-radius: 16px;
            padding: 16px 16px 14px;
            background: linear-gradient(135deg, #ffffff, #f9fafb);
            border: 1px solid var(--gray-200);
            display: flex;
            flex-direction: column;
            gap: 8px;
            box-shadow: 0 6px 18px rgba(15, 23, 42, 0.04);
        }

        .card a.more-link {
            margin-top: 4px;
            align-self: flex-start;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--accent-500);
            text-decoration: none;
        }

        .card a.more-link::after {
            content: " ‚Üí";
        }

        .card h3 {
            margin: 0;
            font-size: 1.2rem;
        }

        .tag-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            background: rgba(191, 184, 172, 0.12);
            color: var(--accent-500);
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        ul {
            padding-left: 18px;
            margin: 0;
        }

        ul li {
            margin-bottom: 4px;
        }

        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
        }

        .step {
            border-left: 4px solid var(--accent-500);
            padding: 10px 14px;
            background: var(--gray-050);
            border-radius: 12px;
        }

        .step span {
            font-size: 0.8rem;
            color: var(--gray-600);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .pricing {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 16px;
        }

        .table-like {
            border: 1px dashed var(--gray-300);
            border-radius: 14px;
            padding: 18px;
            background: #ffffff;
        }

        blockquote {
            margin: 0;
            padding: 20px;
            border-left: 4px solid var(--accent-500);
            background: #ffffff;
            border-radius: 12px;
            font-style: italic;
            text-align: center;
        }

        footer {
            text-align: center;
            margin-top: 28px;
        }

        footer a {
            display: inline-block;
            background: var(--accent-500);
            color: #fff;
            text-decoration: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
            box-shadow: 0 12px 30px rgba(240, 163, 32, 0.3);
        }

        @media (max-width: 640px) {
            header {
                padding: 32px 24px;
            }

            section {
                padding: 24px;
            }
        }
    </style>
</head>
<body>

<div class="gcse-search"></div>
    <div class="page">
        <header>
			<h1>Wekey : Filiere d'excellence -Architecture</h1>
            <h2>Catalogue de Services Architecture & Transformation</h2>
            <p>
                Des offres packag√©es, op√©r√©es par des experts multi-domaines, pour acc√©l√©rer
                vos trajectoires de modernisation, s√©curiser vos SI et industrialiser vos usages data & IA.
            </p>
            <a href="#contact" class="hero-cta">Planifier un √©change</a>
        </header>

        <section>
            <div class="pill">Vision & diff√©renciation</div>
            <h2>Faire de l‚Äôarchitecture un levier d‚Äôimpact mesurable</h2>
            <p class="subtitle">
                Des missions cadr√©es, industrialis√©es et pilot√©es par la valeur pour toutes les couches du SI.
            </p>
            <div class="grid">
                <div class="card">
                    <h3>Expertise multi-domaines</h3>
                    <ul>
                        <li>Architecture d‚Äôentreprise, Applications, Cloud & Infrastructure</li>
                        <li>Data & IA, S√©curit√©, Digital Workplace</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>M√©thodologie adaptable</h3>
                    <ul>
                        <li>Cadrage, diagnostic, conception, mise en ≈ìuvre, pilotage</li>
                        <li>Standards ArchiMate, TOGAF, ITIL, COBIT, NIST, FinOps</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>Exp√©rience √©prouv√©e</h3>
                    <ul>
                        <li>Assurance, Banque, Industrie, Secteur public</li>
                        <li>13+ offres pr√™tes √† d√©ployer, du diagnostic √† l‚Äôindustrialisation</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>Valeur mesurable</h3>
                    <ul>
                        <li>Dimensionnement sur variables d‚Äôentr√©e cl√©s</li>
                        <li>Pilotage par KPIs de sortie et engagements qualitatifs</li>
                    </ul>
                </div>
            </div>
        </section>

        <section>
            <div class="pill">Approche g√©n√©rique</div>
            <h2>Un parcours clair pour acc√©l√©rer vos transformations</h2>
            <div class="steps">
                <div class="step">
                    <span>01</span>
                    <h3>Cadrer</h3>
                    <p>Diagnostic flash, alignement sur les enjeux m√©tier & SI.</p>
                </div>
                <div class="step">
                    <span>02</span>
                    <h3>Concevoir</h3>
                    <p>Blueprint cible, roadmaps 30/60/90 jours, business case.</p>
                </div>
                <div class="step">
                    <span>03</span>
                    <h3>Industrialiser</h3>
                    <p>Livrables ex√©cutables, pipelines, documentation & runbooks.</p>
                </div>
                <div class="step">
                    <span>04</span>
                    <h3>Piloter</h3>
                    <p>KPIs, gouvernance, plan de mont√©e en comp√©tences & relais.</p>
                </div>
            </div>
        </section>

        <section>
            <div class="pill">Portefeuille d‚Äôoffres</div>
            <h2>Services packag√©s, dimensionn√©s sur vos enjeux</h2>
            <p class="subtitle">
                Chaque offre d√©taille profils mobilis√©s, livrables, dur√©e, valeur business,
                variables de dimensionnement et KPIs cl√©s.
            </p>
            <div class="grid">
                <div class="card">
                    <h3>Urbanisation SI</h3>
                    <div class="tag-group">
                        <span class="tag">Architecture d‚Äôentreprise</span>
                        <span class="tag">1‚Äì2 mois</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> Architecte d‚Äôentreprise, Urbaniste SI</li>
                        <li><strong>Livrables :</strong> Cartographies compl√®tes, roadmaps de transformation</li>
                        <li><strong>KPIs :</strong> % couverture cartographique, % redondances identifi√©es</li>
                    </ul>
                    <a href="urbanisation-si.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>Monolithe ‚Üí Microservices</h3>
                    <div class="tag-group">
                        <span class="tag">Architecture applicative</span>
                        <span class="tag">2‚Äì3 mois</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> Architecte Solution, Lead Tech</li>
                        <li><strong>Livrables :</strong> HLD, sch√©mas microservices, backlog technique</li>
                        <li><strong>KPIs :</strong> Vitesse de d√©ploiement, Time-to-market</li>
                    </ul>
                    <a href="monolithe-microservices.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>API Management & Int√©gration</h3>
                    <div class="tag-group">
                        <span class="tag">Architecture applicative</span>
                        <span class="tag">1‚Äì2 mois</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> Architecte Solution, Expert Middleware/API</li>
                        <li><strong>Livrables :</strong> Catalogue API, gouvernance, sch√©mas d‚Äôint√©gration</li>
                        <li><strong>KPIs :</strong> % APIs inventori√©es, latence d‚Äôint√©gration</li>
                    </ul>
                    <a href="api-management-integration.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>Migration Cloud Hybride</h3>
                    <div class="tag-group">
                        <span class="tag">Cloud & Infrastructure</span>
                        <span class="tag">2‚Äì3 mois</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> Architecte Cloud, DevOps Engineer, Security Engineer</li>
                        <li><strong>Livrables :</strong> HLD, plans de migration 30/60/90 jours, business case</li>
                        <li><strong>KPIs :</strong> % workloads migr√©s, r√©duction des co√ªts infra</li>
                    </ul>
                    <a href="migration-cloud-hybride.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>Infrastructure as Code</h3>
                    <div class="tag-group">
                        <span class="tag">Cloud & Infra</span>
                        <span class="tag">2‚Äì4 semaines</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> DevOps Engineer, Cloud Architect</li>
                        <li><strong>Livrables :</strong> Templates Terraform/Ansible, documentation, runbooks</li>
                        <li><strong>KPIs :</strong> Temps de provisionnement, % d‚Äôautomatisation</li>
                    </ul>
                    <a href="infrastructure-as-code.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>CI/CD & Industrialisation</h3>
                    <div class="tag-group">
                        <span class="tag">DevOps & SRE</span>
                        <span class="tag">2‚Äì4 semaines</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> Architecte DevOps, SRE, Test Automation Engineer</li>
                        <li><strong>Livrables :</strong> Pipelines CI/CD, documentation, formation</li>
                        <li><strong>KPIs :</strong> Fr√©quence de d√©ploiement, MTTR</li>
                    </ul>
                    <a href="ci-cd-industrialisation.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>Observabilit√© & Monitoring</h3>
                    <div class="tag-group">
                        <span class="tag">DevOps & SRE</span>
                        <span class="tag">1‚Äì2 mois</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> SRE, Architecte Observabilit√©</li>
                        <li><strong>Livrables :</strong> Stack logs/metrics/traces, dashboards, runbooks</li>
                        <li><strong>KPIs :</strong> % couverture monitoring, disponibilit√©</li>
                    </ul>
                    <a href="observabilite-monitoring.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>Zero Trust & IAM</h3>
                    <div class="tag-group">
                        <span class="tag">Security & Governance</span>
                        <span class="tag">1‚Äì2 mois</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> Security Architect, IAM Specialist</li>
                        <li><strong>Livrables :</strong> Mod√®le Zero Trust, plan IAM, gouvernance des acc√®s</li>
                        <li><strong>KPIs :</strong> % identit√©s g√©r√©es, incidents li√©s aux acc√®s</li>
                    </ul>
                    <a href="zero-trust-iam.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>PCA/PRA & Continuit√©</h3>
                    <div class="tag-group">
                        <span class="tag">Security & Governance</span>
                        <span class="tag">1‚Äì2 mois</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> Business Continuity Manager, Security Architect</li>
                        <li><strong>Livrables :</strong> Plans PCA/PRA, tests de reprise, runbooks</li>
                        <li><strong>KPIs :</strong> RTO/RPO atteints, taux de succ√®s PRA</li>
                    </ul>
                    <a href="pca-pra-continuite.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>Architecture Data Mesh</h3>
                    <div class="tag-group">
                        <span class="tag">Data & AI</span>
                        <span class="tag">2‚Äì3 mois</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> Data Architect, Data Engineer</li>
                        <li><strong>Livrables :</strong> Mod√®les data domain, gouvernance data, POC</li>
                        <li><strong>KPIs :</strong> Domaines autonomes, % datasets r√©utilis√©s</li>
                    </ul>
                    <a href="architecture-data-mesh.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>MLOps & IA industrielle</h3>
                    <div class="tag-group">
                        <span class="tag">Data & AI</span>
                        <span class="tag">1‚Äì2 mois</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> MLOps Engineer, AI Solution Architect</li>
                        <li><strong>Livrables :</strong> Pipelines MLOps, monitoring des mod√®les, gouvernance IA</li>
                        <li><strong>KPIs :</strong> Temps de mise en production, % mod√®les monitor√©s</li>
                    </ul>
                    <a href="mlops-ia-industrielle.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>RAG & IA g√©n√©rative responsable</h3>
                    <div class="tag-group">
                        <span class="tag">Data & AI</span>
                        <span class="tag">1‚Äì2 mois</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> Data Architect, AI Solution Architect, MLOps Engineer</li>
                        <li><strong>Livrables :</strong> Architecture RAG, int√©gration sources internes, pilote m√©tier</li>
                        <li><strong>KPIs :</strong> Taux de r√©ponses correctes, adoption utilisateurs</li>
                    </ul>
                    <a href="rag-ia-generative-responsable.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>SD-WAN & SASE</h3>
                    <div class="tag-group">
                        <span class="tag">Network & Edge</span>
                        <span class="tag">1‚Äì2 mois</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> Network Architect, Cloud Network Engineer</li>
                        <li><strong>Livrables :</strong> Architecture r√©seau cible, plan de migration SD-WAN</li>
                        <li><strong>KPIs :</strong> % sites migr√©s, latence am√©lior√©e</li>
                    </ul>
                    <a href="sd-wan-sase.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>Audit de Qualit√© Logicielle</h3>
                    <div class="tag-group">
                        <span class="tag">Qualit√© & Tests</span>
                        <span class="tag">2‚Äì4 semaines</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> Expert Qualit√© Logicielle, DevOps</li>
                        <li><strong>Livrables :</strong> Rapport d'audit, plan d'action, recommandations</li>
                        <li><strong>KPIs :</strong> Dette technique, couverture de tests, vuln√©rabilit√©s</li>
                    </ul>
                    <a href="audit-qualite-logicielle.html" class="more-link">En savoir plus</a>
                </div>
                <div class="card">
                    <h3>Modernisation Digital Workplace</h3>
                    <div class="tag-group">
                        <span class="tag">Digital Workplace</span>
                        <span class="tag">1‚Äì2 mois</span>
                    </div>
                    <ul>
                        <li><strong>Profils :</strong> Workplace Architect, IAM Engineer</li>
                        <li><strong>Livrables :</strong> Sch√©mas cibles workplace, int√©grations M365/Google</li>
                        <li><strong>KPIs :</strong> Taux d‚Äôadoption des outils, satisfaction utilisateurs</li>
                    </ul>
                    <a href="modernisation-digital-workplace.html" class="more-link">En savoir plus</a>
                </div>
            </div>
        </section>

        <section>
            <div class="pill">Mod√®les √©conomiques</div>
            <h2>Tarification transparente, pilot√©e par la valeur</h2>
            <div class="pricing">
                <div class="table-like">
                    <h3>TJM indicatifs</h3>
                    <ul>
                        <li>Architecte d‚ÄôEntreprise ‚Äî 1‚ÄØ200 ‚Ç¨</li>
                        <li>Architecte Solution ‚Äî 1‚ÄØ000 ‚Ç¨</li>
                        <li>Architecte R√©seau & Cloud ‚Äî 950 ‚Ç¨</li>
                        <li>DevOps / SRE ‚Äî 850 ‚Ç¨</li>
                        <li>Data Architect / Engineer ‚Äî 950 ‚Ç¨</li>
                        <li>Security Architect / IAM ‚Äî 1‚ÄØ050 ‚Ç¨</li>
                        <li>AI Solution Architect (RAG/LLM) ‚Äî 1‚ÄØ200 ‚Ç¨</li>
                        <li>MLOps Engineer ‚Äî 1‚ÄØ000 ‚Ç¨</li>
                    </ul>
                </div>
                <div class="table-like">
                    <h3>Packages forfaitaires</h3>
                    <ul>
                        <li>Mission courte (2‚Äì4 semaines) ‚Äî 25 √† 50 k‚Ç¨</li>
                        <li>Mission moyenne (1‚Äì2 mois) ‚Äî 50 √† 90 k‚Ç¨</li>
                        <li>Mission complexe (2‚Äì3 mois) ‚Äî 90 √† 150 k‚Ç¨</li>
                        <li>Grand programme (&gt;3 mois) ‚Äî sur devis</li>
                    </ul>
                    <p><strong>Options & valeur ajout√©e :</strong> formation, gouvernance, support post-projet.</p>
                </div>
            </div>
        </section>

        <!-- Temporairement masqu√© - section √† activer quand des r√©f√©rences seront disponibles -->
        <!-- <section>
            <div class="pill">R√©f√©rences & t√©moignages</div>
            <h2>Des r√©sultats tangibles sur plusieurs secteurs</h2>
            <div class="grid">
                <div class="card">
                    <h3>Assurance</h3>
                    <p>Programme de rationalisation & gouvernance SI, r√©duction des redondances applicatives.</p>
                </div>
                <div class="card">
                    <h3>Industrie</h3>
                    <p>Mise en ≈ìuvre Data & IA pour booster la productivit√© et acc√©l√©rer l'innovation.</p>
                </div>
                <div class="card">
                    <h3>Services publics</h3>
                    <p>Transformation digitale s√©curis√©e, protection des donn√©es citoyennes et continuit√© de service.</p>
                </div>
            </div>
            <blockquote>
                ¬´ Gr√¢ce √† la fili√®re Architecture Wekey, nous avons acc√©l√©r√© notre transformation digitale et renforc√© la r√©silience de notre SI. ¬ª
            </blockquote>
        </section> -->

        <footer id="contact">
            <a href="mailto:contact@wekey.fr?subject=Demande%20d'information%20Architecture">Passez √† l‚Äôaction</a>
            <p style="margin-top:16px; color: var(--gray-600); font-size: 0.9rem;">
                ¬© Wekey - Nap√© Kona
            </p>
        </footer>
    </div>

    <!-- Chatbot global catalogue -->
    <div class="chatbot-container" id="chatbotContainer">
        <div class="chatbot-header" style="background: var(--accent-500); color: #fff; padding: 12px 15px; display: flex; justify-content: space-between; align-items: center; font-weight: 600;">
            <h4 style="margin: 0; font-size: 0.95rem;">Assistant Catalogue Architecture</h4>
            <button class="chatbot-close" id="chatbotClose" style="background: none; border: none; color: #fff; font-size: 20px; cursor: pointer; line-height: 1; padding: 0 5px;">√ó</button>
        </div>
        <div class="chatbot-messages" id="chatbotMessages" style="padding: 15px; height: 260px; overflow-y: auto; background: #f9f9f9; font-size: 0.9rem;">
            <div class="chatbot-message bot" style="margin-bottom: 10px; padding: 10px 15px; border-radius: 15px; background: #fff; border: 1px solid var(--gray-200);">
                Bonjour ! Je suis votre assistant pour le catalogue Architecture. Je vous aide √† choisir la bonne offre.
                
                Exemples :
                - "Services cloud ?"
                - "Observabilit√© ?"
                - "PCA/PRA ?"
            </div>
        </div>
        <div class="chatbot-input" style="display: flex; padding: 10px; background: #fff; border-top: 1px solid var(--gray-200);">
            <input type="text" id="userInput" placeholder="Posez votre question sur le catalogue..." style="flex: 1; padding: 8px 12px; border-radius: 20px; border: 1px solid var(--gray-300);" />
            <button id="sendButton" style="margin-left: 8px; width: 34px; height: 34px; border-radius: 50%; border: none; background: var(--accent-500); color: #fff; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                ‚ñ∂
            </button>
        </div>
    </div>

    <script>
        // Chatbot catalogue
        document.addEventListener('DOMContentLoaded', function() {
            const chatContainer = document.getElementById('chatbotContainer');
            const chatMessages = document.getElementById('chatbotMessages');
            const userInput = document.getElementById('userInput');
            const sendButton = document.getElementById('sendButton');
            const closeButton = document.getElementById('chatbotClose');

            // Ic√¥ne flottante du chatbot
            const chatIcon = document.createElement('div');
            chatIcon.className = 'chatbot-icon';
            chatIcon.style.position = 'fixed';
            chatIcon.style.bottom = '20px';
            chatIcon.style.right = '20px';
            chatIcon.style.width = '56px';
            chatIcon.style.height = '56px';
            chatIcon.style.borderRadius = '50%';
            chatIcon.style.background = 'var(--accent-500)';
            chatIcon.style.color = '#fff';
            chatIcon.style.display = 'flex';
            chatIcon.style.alignItems = 'center';
            chatIcon.style.justifyContent = 'center';
            chatIcon.style.cursor = 'pointer';
            chatIcon.style.boxShadow = '0 4px 12px rgba(0,0,0,0.2)';
            chatIcon.style.zIndex = '999';
            chatIcon.textContent = 'üí¨';
            document.body.appendChild(chatIcon);

            // Masquer le container au chargement
            chatContainer.style.position = 'fixed';
            chatContainer.style.bottom = '90px';
            chatContainer.style.right = '20px';
            chatContainer.style.width = '340px';
            chatContainer.style.background = '#fff';
            chatContainer.style.borderRadius = '10px';
            chatContainer.style.boxShadow = '0 5px 15px rgba(0,0,0,0.15)';
            chatContainer.style.display = 'none';
            chatContainer.style.flexDirection = 'column';
            chatContainer.style.zIndex = '1000';

            chatIcon.addEventListener('click', function() {
                chatContainer.style.display = 'flex';
                chatIcon.style.display = 'none';
            });

            closeButton.addEventListener('click', function() {
                chatContainer.style.display = 'none';
                chatIcon.style.display = 'flex';
            });

            function appendMessage(content, sender, isHtml = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'chatbot-message ' + sender;
                messageDiv.style.marginBottom = '10px';
                messageDiv.style.padding = '10px 15px';
                messageDiv.style.borderRadius = '15px';
                messageDiv.style.maxWidth = '85%';
                messageDiv.style.fontSize = '0.9rem';

                if (sender === 'user') {
                    messageDiv.style.background = 'var(--accent-500)';
                    messageDiv.style.color = '#fff';
                    messageDiv.style.marginLeft = 'auto';
                } else {
                    messageDiv.style.background = '#fff';
                    messageDiv.style.border = '1px solid var(--gray-200)';
                    messageDiv.style.marginRight = 'auto';
                }

                if (isHtml && sender !== 'user') {
                    messageDiv.innerHTML = content;
                } else {
                    messageDiv.textContent = content;
                }

                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            // Index enrichi des offres du catalogue pour le chatbot
            const catalogueIndex = [
                {
                    id: 'urbanisation',
                    title: "Urbanisation SI",
                    category: 'Architecture',
                    keywords: ['urbanisation', 'cartographie', 'rationalisation', 'paysage applicatif', 'architecture entreprise', 'transformation si', 'cartes', 'applications', 'redondances', 'roadmap'],
                    description: "Cartographie compl√®te du SI, identification des redondances, roadmap de transformation",
                    deliverables: ['Cartographies compl√®tes', 'Roadmaps de transformation', 'Diagnostic urbanisation'],
                    profiles: ['Architecte d entreprise', 'Urbaniste SI'],
                    duration: '1-2 mois',
                    kpis: ['% couverture cartographique', '% redondances identifi√©es'],
                    answer: "L'offre <strong>Urbanisation SI</strong> vous aide √† rationaliser votre paysage applicatif et √† d√©finir une trajectoire de transformation coh√©rente. Livrables : cartographies compl√®tes, roadmaps. Profils : Architecte d'entreprise, Urbaniste SI. Dur√©e : 1-2 mois. <a href='urbanisation-si.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: [
                        "Comment rationaliser mon SI ?",
                        "Qu'est-ce que l'urbanisation du SI ?",
                        "J'ai trop d'applications redondantes",
                        "Comment cartographier mon syst√®me d'information"
                    ]
                },
                {
                    id: 'microservices',
                    title: "Monolithe ‚Üí Microservices",
                    category: 'Architecture',
                    keywords: ['microservices', 'monolithe', 'architecture applicative', 'd√©coupage', 'services', 'api', 'scalabilit√©', 'performance'],
                    description: "Transformation d'architecture monolithique vers microservices",
                    deliverables: ['HLD', 'Sch√©mas microservices', 'Backlog technique'],
                    profiles: ['Architecte Solution', 'Lead Tech'],
                    duration: '2-3 mois',
                    kpis: ['Vitesse de d√©ploiement', 'Time-to-market'],
                    answer: "L'offre <strong>Monolithe ‚Üí Microservices</strong> modernise votre architecture applicative. Livrables : HLD, sch√©mas microservices, backlog technique. Profils : Architecte Solution, Lead Tech. Dur√©e : 2-3 mois. <a href='monolithe-microservices.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: [
                        "Comment passer en microservices ?",
                        "Mon application est lente",
                        "Je veux d√©couper mon monolithe",
                        "Architecture moderne applicative"
                    ]
                },
                {
                    id: 'api-management',
                    title: "API Management & Int√©gration",
                    category: 'Architecture',
                    keywords: ['api', 'integration', 'middleware', 'gouvernance', 'catalogue api', 'rest', 'soap', 'connectivit√©'],
                    description: "Gouvernance et gestion du parc d'APIs",
                    deliverables: ['Catalogue API', 'Gouvernance', 'Sch√©mas d int√©gr√©gration'],
                    profiles: ['Architecte Solution', 'Expert Middleware/API'],
                    duration: '1-2 mois',
                    kpis: ['% APIs inventori√©es', 'Latence d int√©gration'],
                    answer: "L'offre <strong>API Management & Int√©gration</strong> structure votre parc d'APIs. Livrables : catalogue API, gouvernance. Profils : Architecte Solution, Expert Middleware. Dur√©e : 1-2 mois. <a href='api-management-integration.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: [
                        "Comment g√©rer mes APIs ?",
                        "Mise en place gouvernance API",
                        "Int√©gration syst√®mes",
                        "Catalogue d'APIs"
                    ]
                },
                {
                    id: 'cloud',
                    title: "Cloud & Infrastructure",
                    category: 'Cloud & Infrastructure',
                    keywords: ['cloud', 'migration', 'infra', 'infrastructure', 'iac', 'infrastructure as code', 'sd-wan', 'sase', 'terraform', 'ansible', 'aws', 'azure', 'gcp'],
                    description: "Transformation cloud et industrialisation de l'infrastructure",
                    offers: [
                        {
                            name: 'Migration Cloud Hybride',
                            link: 'migration-cloud-hybride.html',
                            keywords: ['migration cloud', 'hybride', 'transformation', 'business case']
                        },
                        {
                            name: 'Infrastructure as Code',
                            link: 'infrastructure-as-code.html',
                            keywords: ['iac', 'terraform', 'ansible', 'automatisation']
                        },
                        {
                            name: 'SD-WAN & SASE',
                            link: 'sd-wan-sase.html',
                            keywords: ['sd-wan', 'sase', 'r√©seau', 's√©curit√© r√©seau']
                        }
                    ],
                    answer: "Pour vos enjeux <strong>Cloud & Infrastructure</strong>, plusieurs offres disponibles : <a href='migration-cloud-hybride.html'>Migration Cloud Hybride</a> (transformation), <a href='infrastructure-as-code.html'>Infrastructure as Code</a> (automatisation), <a href='sd-wan-sase.html'>SD-WAN & SASE</a> (r√©seau s√©curis√©).",
                    examples: [
                        "Quelle offre pour migrer vers le cloud ?",
                        "Comment industrialiser mon infrastructure ?",
                        "Mise en place Terraform",
                        "SD-WAN ou SASE ?"
                    ]
                },
                {
                    id: 'devops',
                    title: "DevOps, CI/CD & Observabilit√©",
                    category: 'DevOps & SRE',
                    keywords: ['ci/cd', 'cicd', 'pipeline', 'devops', 'observabilit√©', 'monitoring', 'logs', 'metrics', 'traces', 'sre', 'supervision', 'alerting'],
                    description: "Industrialisation des d√©ploiements et supervision des syst√®mes",
                    offers: [
                        {
                            name: 'CI/CD & Industrialisation',
                            link: 'ci-cd-industrialisation.html',
                            keywords: ['ci/cd', 'pipeline', 'industrialisation', 'automatisation']
                        },
                        {
                            name: 'Observabilit√© & Monitoring',
                            link: 'observabilite-monitoring.html',
                            keywords: ['observabilit√©', 'monitoring', 'logs', 'metrics', 'traces']
                        }
                    ],
                    answer: "Pour l'industrialisation DevOps : <a href='ci-cd-industrialisation.html'>CI/CD & Industrialisation</a> (pipelines, automatisation). Pour la supervision : <a href='observabilite-monitoring.html'>Observabilit√© & Monitoring</a> (logs, m√©triques, traces).",
                },
                {
                    title: "SD-WAN & SASE",
                    keywords: ["sd-wan", "sase", "r√©seau", "s√©curit√©", "connectivit√©"],
                    description: "Architecture r√©seau SD-WAN et s√©curit√© SASE",
                    file: "sd-wan-sase.html",
                    answer: "L'offre <strong>SD-WAN & SASE</strong> modernise votre architecture r√©seau avec SD-WAN et s√©curit√© SASE. Dur√©e : 1-2 mois. <a href='sd-wan-sase.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: ["Moderniser mon r√©seau", "SD-WAN", "S√©curit√© r√©seau", "SASE"]
                },
                {
                    title: "CI/CD & Industrialisation",
                    keywords: ["cicd", "pipeline", "devops", "industrialisation", "automatisation"],
                    description: "Pipelines CI/CD et industrialisation",
                    file: "ci-cd-industrialisation.html",
                    answer: "L'offre <strong>CI/CD & Industrialisation</strong> met en place vos pipelines CI/CD avec documentation et formation. Dur√©e : 2-4 semaines. <a href='ci-cd-industrialisation.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: ["Mettre en place CI/CD", "Industrialiser mes d√©veloppements", "Pipelines DevOps"]
                },
                {
                    title: "Observabilit√© & Monitoring",
                    keywords: ["observabilite", "monitoring", "logs", "metrics", "traces", "sre"],
                    description: "Stack logs/metrics/traces et monitoring",
                    file: "observabilite-monitoring.html",
                    answer: "L'offre <strong>Observabilit√© & Monitoring</strong> d√©ploie votre stack logs/metrics/traces avec dashboards et runbooks. Dur√©e : 1-2 mois. <a href='observabilite-monitoring.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: ["Observer mes applications", "Monitoring", "Logs metrics traces", "SRE"]
                },
                {
                    title: "Zero Trust & IAM",
                    keywords: ["zero trust", "iam", "s√©curit√©", "identit√©", "acc√®s"],
                    description: "Mod√®le Zero Trust et gestion des identit√©s",
                    file: "zero-trust-iam.html",
                    answer: "L'offre <strong>Zero Trust & IAM</strong> impl√©mente votre mod√®le Zero Trust avec plan IAM et gouvernance des acc√®s. Dur√©e : 1-2 mois. <a href='zero-trust-iam.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: ["Zero Trust", "Gestion des identit√©s", "IAM", "S√©curit√© des acc√®s"]
                },
                {
                    title: "PCA/PRA & Continuit√©",
                    keywords: ["pca", "pra", "continuit√©", "disaster", "recovery", "pdc"],
                    description: "Plans PCA/PRA et continuit√© d'activit√©",
                    file: "pca-pra-continuite.html",
                    answer: "L'offre <strong>PCA/PRA & Continuit√©</strong> √©tablit vos plans PCA/PRA avec tests de reprise et runbooks. Dur√©e : 1-2 mois. <a href='pca-pra-continuite.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: ["PCA/PRA", "Continuit√© d'activit√©", "Plan de reprise", "Disaster recovery"]
                },
                {
                    title: "Architecture Data Mesh",
                    keywords: ["data mesh", "data", "donn√©es", "architecture", "domaine"],
                    description: "Architecture Data Mesh et gouvernance des donn√©es",
                    file: "architecture-data-mesh.html",
                    answer: "L'offre <strong>Architecture Data Mesh</strong> con√ßoit vos mod√®les data domain avec gouvernance data et POC. Dur√©e : 2-3 mois. <a href='architecture-data-mesh.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: ["Data Mesh", "Architecture des donn√©es", "Gouvernance data", "Data domain"]
                },
                {
                    title: "MLOps & IA Industrielle",
                    keywords: ["mlops", "ia", "machine learning", "ai", "industrielle"],
                    description: "Pipelines MLOps et IA industrielle",
                    file: "mlops-ia-industrielle.html",
                    answer: "L'offre <strong>MLOps & IA Industrielle</strong> d√©ploie vos pipelines MLOps avec monitoring mod√®les et gouvernance IA. Dur√©e : 1-2 mois. <a href='mlops-ia-industrielle.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: ["MLOps", "IA industrielle", "Machine learning", "Monitoring mod√®les"]
                },
                {
                    title: "RAG & IA G√©n√©rative Responsable",
                    keywords: ["rag", "ia", "g√©n√©rative", "llm", "responsable"],
                    description: "Architecture RAG et IA g√©n√©rative responsable",
                    file: "rag-ia-generative-responsable.html",
                    answer: "L'offre <strong>RAG & IA G√©n√©rative Responsable</strong> construit votre architecture RAG avec int√©gration sources internes. Dur√©e : 1-2 mois. <a href='rag-ia-generative-responsable.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: ["RAG", "IA g√©n√©rative", "LLM", "IA responsable"]
                },
                {
                    title: "Modernisation Digital Workplace",
                    keywords: ["workplace", "digital", "m365", "google", "collaboration"],
                    description: "Modernisation du digital workplace",
                    file: "modernisation-digital-workplace.html",
                    answer: "L'offre <strong>Modernisation Digital Workplace</strong> d√©finit vos sch√©mas cibles workplace avec int√©grations M365/Google. Dur√©e : 1-2 mois. <a href='modernisation-digital-workplace.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: ["Moderniser mon workplace", "Digital workplace", "M365", "Google Workspace"]
                },
                {
                    title: "Audit de Qualit√© Logicielle",
                    keywords: ["audit", "qualit√©", "logiciel", "code", "test", "dette"],
                    description: "Audit de qualit√© logicielle et dette technique",
                    file: "audit-qualite-logicielle.html",
                    answer: "L'offre <strong>Audit de Qualit√© Logicielle</strong> √©value votre maturit√© logicielle. Livrables : rapport d'audit, plan d'action. Dur√©e : 2-4 semaines. <a href='audit-qualite-logicielle.html'>Voir la fiche d√©taill√©e</a>.",
                    examples: ["Auditer mon code", "R√©duire ma dette technique", "Qualit√© logicielle", "Audit de s√©curit√© applicative"]
                }
            ];

            // Fonction pour charger et indexer toutes les fiches HTML
            async function loadAllSheets() {
                const sheets = catalogueIndex.map(entry => entry.file);
                const fullTextIndex = {};
                
                for (const sheet of sheets) {
                    try {
                        const response = await fetch(sheet);
                        const html = await response.text();
                        
                        // Extraction du contenu textuel simple
                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = html;
                        
                        // R√©cup√©rer le titre principal
                        const title = tempDiv.querySelector('h1')?.textContent || '';
                        
                        // R√©cup√©rer la description famille
                        const familyDesc = tempDiv.querySelector('.family-description')?.textContent || '';
                        
                        // R√©cup√©rer tous les textes pertinents
                        const allText = tempDiv.textContent.toLowerCase();
                        
                        fullTextIndex[sheet] = {
                            title: title,
                            familyDescription: familyDesc,
                            fullText: allText,
                            url: sheet
                        };
                    } catch (error) {
                        console.warn(`Impossible de charger ${sheet}:`, error);
                    }
                }
                
                return fullTextIndex;
            }

            // Recherche √©tendue dans toutes les fiches
            async function searchInAllSheets(query) {
                const sheetsIndex = await loadAllSheets();
                const results = [];
                const queryLower = query.toLowerCase();
                
                for (const [filename, content] of Object.entries(sheetsIndex)) {
                    let score = 0;
                    const matches = [];
                    
                    // Recherche dans le titre
                    if (content.title.toLowerCase().includes(queryLower)) {
                        score += 10;
                        matches.push(`Titre: ${content.title}`);
                    }
                    
                    // Recherche dans la description famille
                    if (content.familyDescription.toLowerCase().includes(queryLower)) {
                        score += 5;
                        matches.push(`Description: ${content.familyDescription.substring(0, 100)}...`);
                    }
                    
                    // Recherche dans le texte complet
                    if (content.fullText.includes(queryLower)) {
                        score += 2;
                        
                        // Chercher des extraits pertinents
                        const words = queryLower.split(' ');
                        for (const word of words) {
                            if (word.length > 2) {
                                const index = content.fullText.indexOf(word);
                                if (index !== -1) {
                                    const start = Math.max(0, index - 50);
                                    const end = Math.min(content.fullText.length, index + word.length + 50);
                                    const excerpt = content.fullText.substring(start, end).trim();
                                    if (excerpt.length > 20) {
                                        matches.push(`...${excerpt}...`);
                                    }
                                }
                            }
                        }
                    }
                    
                    if (score > 0) {
                        const entry = catalogueIndex.find(e => e.file === filename);
                        results.push({
                            score: score,
                            title: content.title,
                            file: filename,
                            matches: matches.slice(0, 3), // Limiter √† 3 matches
                            answer: entry ? entry.answer : `Consultez la fiche <a href='${filename}'>${content.title}</a> pour plus d'informations.`
                        });
                    }
                }
                
                // Trier par score d√©croissant
                results.sort((a, b) => b.score - a.score);
                return results;
            }

            async function getBotResponse(message) {
                try {
                    // Appel √† l'API Groq pour une r√©ponse intelligente
                    const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer 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' // Remplacez avec votre cl√© API Groq
                        },
                        body: JSON.stringify({
                            model: 'llama-3.1-8b-instant', // mod√®le gratuit Groq
                            messages: [
                                {
                                    role: 'system',
                                    content: `Tu es un assistant expert pour le catalogue de services Architecture & Transformation de Wekey. 
                                    Ton r√¥le est d'aider les clients √† comprendre les offres et √† choisir celle qui correspond √† leurs besoins.
                                    
                                    CATALOGUE COMPLET DES OFFRES:
                                    
                                    **ARCHITECTURE:**
                                    1. Urbanisation SI: cartographie compl√®te SI, identification redondances, roadmap transformation (1-2 mois, Architecte d'entreprise, Urbaniste SI)
                                    2. Monolithe ‚Üí Microservices: transformation architecture applicative moderne, HLD, sch√©mas microservices (2-3 mois, Architecte Solution, Lead Tech)  
                                    3. API Management & Int√©gration: gouvernance parc APIs, catalogue API, sch√©mas int√©gration (1-2 mois, Architecte Solution, Expert Middleware)
                                    
                                    **CLOUD & INFRASTRUCTURE:**
                                    4. Migration Cloud Hybride: transformation cloud hybride, plans migration 30/60/90 jours, business case (2-3 mois, Architecte Cloud, DevOps, Security)
                                    5. Infrastructure as Code: automatisation avec Terraform/Ansible, templates, documentation (2-4 semaines, DevOps Engineer, Cloud Architect)
                                    6. SD-WAN & SASE: architecture r√©seau cible, migration SD-WAN, s√©curit√© r√©seau (1-2 mois, Network Architect, Cloud Network Engineer)
                                    
                                    **DEVOPS & SRE:**
                                    7. CI/CD & Industrialisation: pipelines CI/CD, documentation, formation (2-4 semaines, Architecte DevOps, SRE, Test Automation)
                                    8. Observabilit√© & Monitoring: stack logs/metrics/traces, dashboards, runbooks (1-2 mois, SRE, Architecte Observabilit√©)
                                    
                                    **S√âCURIT√â & GOUVERNANCE:**
                                    9. Zero Trust & IAM: mod√®le Zero Trust, plan IAM, gouvernance acc√®s (1-2 mois, Security Architect, IAM Specialist)
                                    10. PCA/PRA & Continuit√©: plans PCA/PRA, tests reprise, runbooks (1-2 mois, Business Continuity Manager, Security Architect)
                                    
                                    **DATA & IA:**
                                    11. Architecture Data Mesh: mod√®les data domain, gouvernance data, POC (2-3 mois, Data Architect, Data Engineer)
                                    12. MLOps & IA industrielle: pipelines MLOps, monitoring mod√®les, gouvernance IA (1-2 mois, MLOps Engineer, AI Solution Architect)
                                    13. RAG & IA g√©n√©rative responsable: architecture RAG, int√©gration sources internes, pilote m√©tier (1-2 mois, Data Architect, AI Solution Architect, MLOps)
                                    
                                    **DIGITAL WORKPLACE:**
                                    14. Modernisation Digital Workplace: sch√©mas cibles workplace, int√©grations M365/Google (1-2 mois, Workplace Architect, IAM Engineer)
                                    
                                    **QUALIT√â & TESTS:**
                                    15. Audit de Qualit√© Logicielle: rapport audit, plan action, recommandations (2-4 semaines, Expert Qualit√©, DevOps)
                                    
                                    INFORMATIONS TARIFAIRES (section "Mod√®les √©conomiques"):
                                    - TJM indicatifs: 850‚Ç¨ (DevOps/SRE) √† 1200‚Ç¨ (Architecte d'entreprise/AI Solution Architect)
                                    - Packages: 25-50k‚Ç¨ (2-4 semaines), 50-90k‚Ç¨ (1-2 mois), 90-150k‚Ç¨ (2-3 mois)
                                    
                                    R√àGLES DE R√âPONSE:
                                    - Sois concis, professionnel et orient√© action
                                    - Inclus toujours les liens vers les fiches d√©taill√©es (format: nom-offre.html)
                                    - Mentionne les profils mobilis√©s, livrables cl√©s et dur√©e quand pertinent
                                    - Pour les questions prix, oriente vers la section "Mod√®les √©conomiques"
                                    - Si la question est vague, demande des pr√©cisions sur le contexte
                                    - Format des liens: <a href='nom-offre.html'>Nom de l'offre</a>`
                                },
                                {
                                    role: 'user',
                                    content: message
                                }
                            ],
                            temperature: 0.7,
                            max_tokens: 500
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({}));
                        console.error('D√©tail erreur Groq:', response.status, errorData);
                        throw new Error(`Erreur API Groq: ${response.status} - ${errorData.error?.message || 'Message inconnu'}`);
                    }

                    const data = await response.json();
                    return data.choices[0].message.content;

                } catch (error) {
                    console.error('Erreur lors de l\'appel √† Groq:', error);
                    
                    // Fallback vers le syst√®me basique si Groq n'est pas disponible
                    return getBasicResponse(message);
                }
            }

            async function getBasicResponse(message) {
                const m = message.toLowerCase();

                // Salutations
                if (m.includes('bonjour') || m.includes('salut') || m.includes('bonsoir')) {
                    return "Bonjour ! Je suis votre assistant pour le catalogue Architecture. Je vous aide √† choisir la bonne offre.";
                }

                // Questions sur les prix
                if (m.includes('prix') || m.includes('tarif') || m.includes('co√ªt') || m.includes('budget')) {
                    return "Les ordres de grandeur de prix et mod√®les √©conomiques sont pr√©sent√©s dans la section 'Mod√®les √©conomiques' du catalogue (TJM, packages). Pour un devis pr√©cis, utilisez le bouton 'Passez √† l'action' en bas de page.";
                }

                // Recherche √©tendue dans toutes les fiches d'abord
                try {
                    const sheetResults = await searchInAllSheets(message);
                    if (sheetResults.length > 0) {
                        const bestResult = sheetResults[0];
                        if (bestResult.score >= 5) { // Score √©lev√© = bonne correspondance
                            let response = bestResult.answer;
                            if (bestResult.matches.length > 0) {
                                response += `<br><br><small>üîç Trouv√© dans: ${bestResult.matches.join(', ')}</small>`;
                            }
                            return response;
                        } else if (sheetResults.length > 1) {
                            // Plusieurs r√©sultats avec score moyen
                            const topResults = sheetResults.slice(0, 3);
                            let response = "J'ai trouv√© plusieurs offres pertinentes:<br><br>";
                            topResults.forEach((result, index) => {
                                response += `${index + 1}. <strong>${result.title}</strong><br>`;
                                response += `${result.answer}<br><br>`;
                            });
                            return response;
                        }
                    }
                } catch (error) {
                    console.warn('Erreur recherche √©tendue:', error);
                }

                // Recherche avanc√©e dans l'index enrichi (fallback)
                let bestScore = 0;
                let bestEntry = null;

                catalogueIndex.forEach(entry => {
                    let score = 0;
                    
                    // Recherche dans les mots-cl√©s principaux
                    entry.keywords.forEach(kw => {
                        if (m.includes(kw.toLowerCase())) {
                            score += 2; // Poids double pour les mots-cl√©s
                        }
                    });

                    // Recherche dans la description et le titre
                    if (entry.description && m.includes(entry.description.toLowerCase().substring(0, 20))) {
                        score += 1;
                    }
                    
                    if (m.includes(entry.title.toLowerCase())) {
                        score += 3; // Poids triple pour le titre
                    }

                    // Recherche dans les sous-offres (pour les cat√©gories multi-offres)
                    if (entry.offers) {
                        entry.offers.forEach(offer => {
                            offer.keywords.forEach(kw => {
                                if (m.includes(kw.toLowerCase())) {
                                    score += 1;
                                }
                            });
                            if (m.includes(offer.name.toLowerCase())) {
                                score += 2;
                            }
                        });
                    }

                    if (score > bestScore) {
                        bestScore = score;
                        bestEntry = entry;
                    }
                });

                if (bestEntry && bestScore > 0) {
                    return bestEntry.answer;
                }

                // Suggestions par cat√©gorie si aucun match pr√©cis
                const categorySuggestions = {
                    'cloud': 'Pour vos enjeux cloud, consultez les offres Migration Cloud Hybride, Infrastructure as Code et SD-WAN & SASE.',
                    's√©curit√©': 'Pour la s√©curit√©, explorez Zero Trust & IAM ainsi que PCA/PRA & Continuit√©.',
                    'data': 'C√¥t√© Data & IA, d√©couvrez Architecture Data Mesh, MLOps & IA industrielle et RAG & IA g√©n√©rative.',
                    'devops': 'Pour l industrialisation, regardez CI/CD & Industrialisation et Observabilit√© & Monitoring.'
                };

                for (const [key, suggestion] of Object.entries(categorySuggestions)) {
                    if (m.includes(key)) {
                        return suggestion;
                    }
                }

                return "Je peux vous aider √† comprendre les diff√©rentes offres du catalogue. Vous pouvez me poser des questions sur: cloud, s√©curit√©, data & IA, DevOps, urbanisation SI, microservices, API, etc.";
            }

            async function sendMessage() {
                const text = userInput.value.trim();
                if (!text) return;
                appendMessage(text, 'user');
                userInput.value = '';

                // Afficher un message de chargement
                const loadingDiv = document.createElement('div');
                loadingDiv.className = 'chatbot-message bot';
                loadingDiv.style.marginBottom = '10px';
                loadingDiv.style.padding = '10px 15px';
                loadingDiv.style.borderRadius = '15px';
                loadingDiv.style.background = '#fff';
                loadingDiv.style.border = '1px solid var(--gray-200)';
                loadingDiv.style.marginRight = 'auto';
                loadingDiv.style.fontSize = '0.9rem';
                loadingDiv.textContent = 'Je r√©fl√©chis...';
                chatMessages.appendChild(loadingDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;

                try {
                    const resp = await getBotResponse(text);
                    // Remplacer le message de chargement par la r√©ponse
                    chatMessages.removeChild(loadingDiv);
                    appendMessage(resp, 'bot', true);
                } catch (error) {
                    // Remplacer le message de chargement par un message d'erreur
                    chatMessages.removeChild(loadingDiv);
                    appendMessage('D√©sol√©, une erreur est survenue. Veuillez r√©essayer.', 'bot');
                }
            }

            sendButton.addEventListener('click', sendMessage);
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        });
    </script>
</body>
</html>
